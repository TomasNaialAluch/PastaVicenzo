(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52910,e=>{"use strict";let s=(0,e.i(10965).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>s],52910)},29260,e=>{"use strict";var s=e.i(96243),a=e.i(93221),r=e.i(13293),t=e.i(76841),i=e.i(67881),n=e.i(70065),l=e.i(23750),c=e.i(10708),d=e.i(84244),o=e.i(48054),m=e.i(49110),h=e.i(92357),u=e.i(49056),x=e.i(52910);let p=(0,e.i(10965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var f=e.i(78896),j=e.i(45765),g=e.i(97723),b=e.i(19984),N=e.i(27394),v=e.i(20077),y=e.i(70312),C="Switch",[k,w]=(0,g.createContextScope)(C),[E,P]=k(C),S=a.forwardRef((e,r)=>{let{__scopeSwitch:t,name:i,checked:n,defaultChecked:l,required:c,disabled:d,value:o="on",onCheckedChange:m,form:h,...u}=e,[x,p]=a.useState(null),g=(0,j.useComposedRefs)(r,e=>p(e)),N=a.useRef(!1),v=!x||h||!!x.closest("form"),[C=!1,k]=(0,b.useControllableState)({prop:n,defaultProp:l,onChange:m});return(0,s.jsxs)(E,{scope:t,checked:C,disabled:d,children:[(0,s.jsx)(y.Primitive.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":R(C),"data-disabled":d?"":void 0,disabled:d,value:o,...u,ref:g,onClick:(0,f.composeEventHandlers)(e.onClick,e=>{k(e=>!e),v&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),v&&(0,s.jsx)(U,{control:x,bubbles:!N.current,name:i,value:o,checked:C,required:c,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})});S.displayName=C;var L="SwitchThumb",F=a.forwardRef((e,a)=>{let{__scopeSwitch:r,...t}=e,i=P(L,r);return(0,s.jsx)(y.Primitive.span,{"data-state":R(i.checked),"data-disabled":i.disabled?"":void 0,...t,ref:a})});F.displayName=L;var U=e=>{let{control:r,checked:t,bubbles:i=!0,...n}=e,l=a.useRef(null),c=(0,N.usePrevious)(t),d=(0,v.useSize)(r);return a.useEffect(()=>{let e=l.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&s){let a=new Event("click",{bubbles:i});s.call(e,t),e.dispatchEvent(a)}},[c,t,i]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function R(e){return e?"checked":"unchecked"}var T=e.i(47163);function B({className:e,...a}){return(0,s.jsx)(S,{"data-slot":"switch",className:(0,T.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,s.jsx)(F,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var D=e.i(69035),G=e.i(99092),I=e.i(91432);e.i(11429);var A=e.i(75985);e.i(45191);var H=e.i(46554),z=e.i(76009),O=e.i(22036);function V(){let{user:e,logout:f}=(0,I.useAuth)(),[j,g]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),[v,y]=(0,a.useState)({firstName:"",lastName:"",phone:"",preferences:{marketingEmails:!0,whatsappUpdates:!0,isVegetarian:!1,isGlutenFree:!1}});(0,a.useEffect)(()=>{e&&(async()=>{try{g(!0);let s=e.displayName?.split(" ")||[],a=s[0]||"",r=s.slice(1).join(" ")||"",t=(0,A.doc)(z.db,"users",e.uid),i=await (0,A.getDoc)(t),n=i.exists()?i.data():{};y({firstName:a,lastName:r,phone:n.phone||"",preferences:{marketingEmails:n.preferences?.marketingEmails??!0,whatsappUpdates:n.preferences?.whatsappUpdates??!0,isVegetarian:n.preferences?.isVegetarian??!1,isGlutenFree:n.preferences?.isGlutenFree??!1}})}catch(e){console.error("Error cargando datos:",e),O.toast.error("Error al cargar tu información")}finally{g(!1)}})()},[e]);let C=async()=>{if(e)try{N(!0);let s=`${v.firstName} ${v.lastName}`.trim();z.auth.currentUser&&await (0,H.updateProfile)(z.auth.currentUser,{displayName:s});let a=(0,A.doc)(z.db,"users",e.uid);await (0,A.updateDoc)(a,{phone:v.phone,preferences:v.preferences,updatedAt:new Date().toISOString()}),O.toast.success("¡Cambios guardados correctamente!")}catch(e){console.error("Error guardando perfil:",e),O.toast.error("Hubo un problema al guardar los cambios")}finally{N(!1)}};return e?(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-muted/10",children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8 md:py-12",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 max-w-5xl mx-auto",children:[(0,s.jsxs)("aside",{className:"w-full md:w-64 flex-shrink-0 space-y-6 hidden md:block",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center p-6 bg-card rounded-xl border shadow-sm",children:[(0,s.jsx)("div",{className:"h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center mb-4 text-primary overflow-hidden",children:e.photoURL?(0,s.jsx)("img",{src:e.photoURL,alt:e.displayName||"Usuario",className:"h-full w-full object-cover"}):(0,s.jsx)(d.User,{className:"h-12 w-12"})}),(0,s.jsx)("h2",{className:"font-serif text-xl font-bold",children:e.displayName||"Usuario"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:e.email})]}),(0,s.jsxs)("nav",{className:"flex flex-col gap-2",children:[(0,s.jsx)(i.Button,{variant:"ghost",asChild:!0,className:"justify-start gap-3 font-medium hover:bg-background hover:shadow-sm w-full",children:(0,s.jsxs)(G.default,{href:"/mi-cuenta",children:[(0,s.jsx)(o.Package,{className:"h-4 w-4"}),"Mis Pedidos"]})}),(0,s.jsx)(i.Button,{variant:"ghost",asChild:!0,className:"justify-start gap-3 font-medium hover:bg-background hover:shadow-sm w-full",children:(0,s.jsxs)(G.default,{href:"/mi-cuenta/direcciones",children:[(0,s.jsx)(m.MapPin,{className:"h-4 w-4"}),"Direcciones"]})}),(0,s.jsxs)(i.Button,{variant:"ghost",className:"justify-start gap-3 font-medium bg-background border shadow-sm",children:[(0,s.jsx)(u.Settings,{className:"h-4 w-4"}),"Configuración"]}),(0,s.jsxs)(i.Button,{variant:"ghost",className:"justify-start gap-3 font-medium text-destructive hover:text-destructive hover:bg-destructive/10",onClick:f,children:[(0,s.jsx)(h.LogOut,{className:"h-4 w-4"}),"Cerrar Sesión"]})]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",asChild:!0,className:"md:hidden",children:(0,s.jsx)(G.default,{href:"/mi-cuenta",children:(0,s.jsx)(x.ChevronLeft,{className:"h-5 w-5"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-serif text-3xl font-bold text-primary",children:"Configuración"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Gestioná tus preferencias y seguridad."})]})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Información Personal"}),(0,s.jsx)(n.CardDescription,{children:"Actualizá tus datos de contacto para los envíos."})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{htmlFor:"firstName",children:"Nombre"}),(0,s.jsx)(l.Input,{id:"firstName",value:v.firstName,onChange:e=>y({...v,firstName:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{htmlFor:"lastName",children:"Apellido"}),(0,s.jsx)(l.Input,{id:"lastName",value:v.lastName,onChange:e=>y({...v,lastName:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{htmlFor:"email",children:"Email"}),(0,s.jsx)(l.Input,{id:"email",value:e.email||"",disabled:!0,className:"bg-muted/50"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"El email no se puede cambiar."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{htmlFor:"phone",children:"Teléfono"}),(0,s.jsx)(l.Input,{id:"phone",value:v.phone,onChange:e=>y({...v,phone:e.target.value}),placeholder:"Ej: 11 1234 5678"})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(i.Button,{onClick:C,disabled:b,children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar Cambios"})})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"Preferencias"}),(0,s.jsx)(n.CardDescription,{children:"Personalizá tu experiencia."})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(c.Label,{className:"text-base",children:"Vegetariano"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Destacar opciones sin carne."})]}),(0,s.jsx)(B,{checked:v.preferences.isVegetarian,onCheckedChange:e=>y({...v,preferences:{...v.preferences,isVegetarian:e}})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(c.Label,{className:"text-base",children:"Sin TACC"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Mostrar solo opciones libres de gluten."})]}),(0,s.jsx)(B,{checked:v.preferences.isGlutenFree,onCheckedChange:e=>y({...v,preferences:{...v.preferences,isGlutenFree:e}})})]}),(0,s.jsx)(D.Separator,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(c.Label,{className:"text-base",children:"Novedades y Promos"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recibir emails con ofertas."})]}),(0,s.jsx)(B,{checked:v.preferences.marketingEmails,onCheckedChange:e=>y({...v,preferences:{...v.preferences,marketingEmails:e}})})]})]})]})})]})]})}),(0,s.jsx)(t.Footer,{})]}):(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-muted/10",children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)("p",{children:"Cargando..."})}),(0,s.jsx)(t.Footer,{})]})}e.s(["default",()=>V],29260)}]);